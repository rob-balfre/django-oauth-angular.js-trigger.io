/*! Copyright 2011 Trigger Corp. All rights reserved. */
(function(){var n={};var o={};n.config={modules:{logging:{level:"DEBUG"}}};n.config.uuid="UUID_HERE";o.listeners={};var q={};var i=[];var h=null;var a=false;var t=function(){if(i.length>0){if(!o.debug||window.catalystConnected){a=true;while(i.length>0){var u=i.shift();if(u[0]=="logging.log"){console.log(u[1].message)}o.priv.call.apply(o.priv,u)}a=false}else{h=setTimeout(t,500)}}};o.priv={call:function(B,A,z,v){if((!o.debug||window.catalystConnected||B==="internal.showDebugWarning")&&(i.length==0||a)){var u=n.tools.UUID();var x=true;if(B==="button.onClicked.addListener"||B==="message.toFocussed"){x=false}if(z||v){q[u]={success:z,error:v,onetime:x}}var w={callid:u,method:B,params:A};o.priv.send(w);if(window._forgeDebug){try{w.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiRequest(w)}catch(y){}}}else{i.push(arguments);if(!h){h=setTimeout(t,500)}}},send:function(u){throw new Error("Forge error: missing bridge to privileged code")},receive:function(u){if(u.callid){if(typeof q[u.callid]===undefined){n.log("Nothing stored for call ID: "+u.callid)}var w=q[u.callid];var v=(typeof u.content==="undefined"?null:u.content);if(w&&w[u.status]){w[u.status](u.content)}if(w&&w.onetime){delete q[u.callid]}if(window._forgeDebug){try{u.end=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiResponse(u)}catch(x){}}}else{if(u.event){if(o.listeners[u.event]){o.listeners[u.event].forEach(function(y){if(u.params){y(u.params)}else{y()}})}if(o.listeners["*"]){o.listeners["*"].forEach(function(y){if(u.params){y(u.event,u.params)}else{y(u.event)}})}if(window._forgeDebug){try{u.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiEvent(u)}catch(x){}}}}}};o.addEventListener=function(u,v){if(o.listeners[u]){o.listeners[u].push(v)}else{o.listeners[u]=[v]}};o.generateQueryString=function(v){if(!v){return""}if(!(v instanceof Object)){return new String(v).toString()}var w=[];var u=function(C,B){if(C===null){return}else{if(C instanceof Array){var z=0;for(var y in C){var A=(B?B:"")+"["+z+"]";z+=1;if(!C.hasOwnProperty(y)){continue}u(C[y],A)}}else{if(C instanceof Object){for(var y in C){if(!C.hasOwnProperty(y)){continue}var A=y;if(B){A=B+"["+y+"]"}u(C[y],A)}}else{w.push(encodeURIComponent(B)+"="+encodeURIComponent(C))}}}};u(v);return w.join("&").replace("%20","+")};o.generateMultipartString=function(v,x){if(typeof v==="string"){return""}var w="";for(var u in v){if(!v.hasOwnProperty(u)){continue}if(v[u]===null){continue}w+="--"+x+"\r\n";w+='Content-Disposition: form-data; name="'+u.replace('"','\\"')+'"\r\n\r\n';w+=v[u].toString()+"\r\n"}return w};o.generateURI=function(v,u){var w="";if(v.indexOf("?")!==-1){w+=v.split("?")[1]+"&";v=v.split("?")[0]}w+=this.generateQueryString(u)+"&";w=w.substring(0,w.length-1);return v+(w?"?"+w:"")};o.disabledModule=function(u,v){var w="The '"+v+"' module is disabled for this app, enable it in your app config and rebuild in order to use this function";n.logging.error(w);u&&u({message:w,type:"UNAVAILABLE",subtype:"DISABLED_MODULE"})};n.enableDebug=function(){o.debug=true;o.priv.call("internal.showDebugWarning",{},null,null);o.priv.call("internal.hideDebugWarning",{},null,null)};setTimeout(function(){if(window.forge&&window.forge.debug){alert("Warning!\n\n'forge.debug = true;' is no longer supported\n\nUse 'forge.enableDebug();' instead.")}},3000);n.barcode={scan:function(v,u){o.disabledModule(u,"barcode")}};n.button={setIcon:function(v,w,u){o.disabledModule(u,"button")},setURL:function(v,w,u){o.disabledModule(u,"button")},onClicked:{addListener:function(u){o.disabledModule(error,"button")}},setBadge:function(v,w,u){o.disabledModule(u,"button")},setBadgeBackgroundColor:function(v,w,u){o.disabledModule(u,"button")},setTitle:function(w,v,u){o.disabledModule(u,"button")}};n.contact={select:function(v,u){o.priv.call("contact.select",{},v,u)},selectById:function(w,v,u){o.priv.call("contact.selectById",{id:w},v,u)},selectAll:function(v,u){o.priv.call("contact.selectAll",{},v,u)}};n.display={orientation:{forcePortrait:function(v,u){o.disabledModule(u,"display")},forceLandscape:function(v,u){o.disabledModule(u,"display")},allowAny:function(v,u){o.disabledModule(u,"display")}}};n.document={reload:function(){return document.location.reload()},location:function(v,u){v(document.location)}};var s={};o.currentOrientation=s;o.currentConnectionState=s;o.addEventListener("internal.orientationChange",function(u){if(o.currentOrientation!=u.orientation){o.currentOrientation=u.orientation;o.priv.receive({event:"event.orientationChange"})}});o.addEventListener("internal.connectionStateChange",function(u){if(u.connected!=o.currentConnectionState.connected||u.wifi!=o.currentConnectionState.wifi){o.currentConnectionState=u;o.priv.receive({event:"event.connectionStateChange"})}});n.event={menuPressed:{addListener:function(v,u){o.disabledModule(u,"event")}},backPressed:{addListener:function(v,u){o.disabledModule(u,"event")},preventDefault:function(v,u){o.disabledModule(u,"event")}},messagePushed:{addListener:function(v,u){o.disabledModule(u,"event")}},orientationChange:{addListener:function(v,u){o.disabledModule(u,"event")}},connectionStateChange:{addListener:function(v,u){o.disabledModule(u,"event")}},appPaused:{addListener:function(v,u){o.disabledModule(u,"event")}},appResumed:{addListener:function(v,u){o.disabledModule(u,"event")}}};n.facebook={authorize:function(w,v,x,u){if(typeof w=="function"){u=v;x=w;w=[];v=undefined}else{if(typeof v==="function"){u=x;x=v;v=undefined}}o.disabledModule(u,"facebook")},hasAuthorized:function(v,w,u){if(typeof v=="function"){u=audience;w=v;v=[];audience=undefined}else{if(typeof audience==="function"){u=w;w=audience;audience=undefined}}o.disabledModule(u,"facebook")},logout:function(v,u){o.disabledModule(u,"facebook")},api:function(v,y,x,w,u){if(typeof y=="function"||arguments.length==1){u=x}else{if(typeof x=="function"||arguments.length==2){u=w}}o.disabledModule(u,"facebook")},ui:function(w,v,u){o.disabledModule(u,"facebook")}};n.file={getImage:function(v,w,u){if(typeof v==="function"){u=w;w=v;v={}}if(!v){v={}}o.priv.call("file.getImage",v,w&&function(y){var x={uri:y,name:"Image",type:"image"};if(v.width){x.width=v.width}if(v.height){x.height=v.height}w(x)},u)},getVideo:function(v,w,u){if(typeof v==="function"){u=w;w=v;v={}}if(!v){v={}}o.priv.call("file.getVideo",v,w&&function(y){var x={uri:y,name:"Video",type:"video"};w(x)},u)},getLocal:function(v,w,u){n.tools.getURL(v,function(x){w({uri:x,name:v})},u)},base64:function(v,w,u){o.priv.call("file.base64",v,w,u)},string:function(v,w,u){n.request.ajax({url:v.uri,success:w,error:u})},URL:function(w,x,y,v){if(typeof x==="function"){v=y;y=x}var u={};for(prop in w){u[prop]=w[prop]}u.height=x.height||w.height||undefined;u.width=x.width||w.width||undefined;o.priv.call("file.URL",u,y,v)},isFile:function(v,w,u){if(!v||!("uri" in v)){w(false)}else{o.priv.call("file.isFile",v,w,u)}},cacheURL:function(v,w,u){o.priv.call("file.cacheURL",{url:v},w&&function(x){w({uri:x})},u)},remove:function(v,w,u){o.priv.call("file.remove",v,w,u)},clearCache:function(v,u){o.priv.call("file.clearCache",{},v,u)}};n.file["getLocal"]=function(v,w,u){o.priv.call("file.getLocal",{name:v},w,u)};n.file["string"]=function(v,w,u){o.priv.call("file.string",v,w,u)};n.flurry={customEvent:function(v,w,x,u){if(typeof w==="function"){u=x;x=w}o.disabledModule(u,"flurry")},startTimedEvent:function(v,w,x,u){if(typeof w==="function"){u=x;x=w}o.disabledModule(u,"flurry")},endCustomEvent:function(v,w,u){o.disabledModule(u,"flurry")},setDemographics:function(v,w,u){o.disabledModule(u,"flurry")},setLocation:function(v,w,u){o.disabledModule(u,"flurry")}};n.geolocation={getCurrentPosition:function(x,w,y){if(typeof(x)==="object"){var v=x,z=w,u=y}else{var z=x,u=w,v=y}o.disabledModule(u,"geolocation")}};n.internal={ping:function(v,w,u){o.priv.call("internal.ping",{data:[v]},w,u)},call:o.priv.call,addEventListener:o.addEventListener};n.is={mobile:function(){return false},desktop:function(){return false},android:function(){return false},ios:function(){return false},chrome:function(){return false},firefox:function(){return false},safari:function(){return false},ie:function(){return false},web:function(){return false},orientation:{portrait:function(){return false},landscape:function(){return false}},connection:{connected:function(){return true},wifi:function(){return true}}};n.is["mobile"]=function(){return true};n.is["ios"]=function(){return true};n.is["orientation"]["portrait"]=function(){return o.currentOrientation=="portrait"};n.is["orientation"]["landscape"]=function(){return o.currentOrientation=="landscape"};n.is["connection"]["connected"]=function(){return o.currentConnectionState.connected};n.is["connection"]["wifi"]=function(){return o.currentConnectionState.wifi};var j=function(A,y,B){var w=[];stylize=function(D,C){return D};function u(C){return C instanceof RegExp||(typeof C==="object"&&Object.prototype.toString.call(C)==="[object RegExp]")}function v(C){return C instanceof Array||Array.isArray(C)||(C&&C!==Object.prototype&&v(C.__proto__))}function x(E){if(E instanceof Date){return true}if(typeof E!=="object"){return false}var C=Date.prototype&&Object.getOwnPropertyNames(Date.prototype);var D=E.__proto__&&Object.getOwnPropertyNames(E.__proto__);return JSON.stringify(D)===JSON.stringify(C)}function z(O,L){try{if(O&&typeof O.inspect==="function"&&!(O.constructor&&O.constructor.prototype===O)){return O.inspect(L)}switch(typeof O){case"undefined":return stylize("undefined","undefined");case"string":var C="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(C,"string");case"number":return stylize(""+O,"number");case"boolean":return stylize(""+O,"boolean")}if(O===null){return stylize("null","null")}if(O instanceof Document){return(new XMLSerializer()).serializeToString(O)}var I=Object.keys(O);var P=y?Object.getOwnPropertyNames(O):I;if(typeof O==="function"&&P.length===0){var D=O.name?": "+O.name:"";return stylize("[Function"+D+"]","special")}if(u(O)&&P.length===0){return stylize(""+O,"regexp")}if(x(O)&&P.length===0){return stylize(O.toUTCString(),"date")}var E,M,J;if(v(O)){M="Array";J=["[","]"]}else{M="Object";J=["{","}"]}if(typeof O==="function"){var H=O.name?": "+O.name:"";E=" [Function"+H+"]"}else{E=""}if(u(O)){E=" "+O}if(x(O)){E=" "+O.toUTCString()}if(P.length===0){return J[0]+E+J[1]}if(L<0){if(u(O)){return stylize(""+O,"regexp")}else{return stylize("[Object]","special")}}w.push(O);var G=P.map(function(R){var Q,S;if(O.__lookupGetter__){if(O.__lookupGetter__(R)){if(O.__lookupSetter__(R)){S=stylize("[Getter/Setter]","special")}else{S=stylize("[Getter]","special")}}else{if(O.__lookupSetter__(R)){S=stylize("[Setter]","special")}}}if(I.indexOf(R)<0){Q="["+R+"]"}if(!S){if(w.indexOf(O[R])<0){if(L===null){S=z(O[R])}else{S=z(O[R],L-1)}if(S.indexOf("\n")>-1){if(v(O)){S=S.split("\n").map(function(T){return"  "+T}).join("\n").substr(2)}else{S="\n"+S.split("\n").map(function(T){return"   "+T}).join("\n")}}}else{S=stylize("[Circular]","special")}}if(typeof Q==="undefined"){if(M==="Array"&&R.match(/^\d+$/)){return S}Q=JSON.stringify(""+R);if(Q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){Q=Q.substr(1,Q.length-2);Q=stylize(Q,"name")}else{Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");Q=stylize(Q,"string")}}return Q+": "+S});w.pop();var N=0;var F=G.reduce(function(Q,R){N++;if(R.indexOf("\n")>=0){N++}return Q+R.length+1},0);if(F>50){G=J[0]+(E===""?"":E+"\n ")+" "+G.join(",\n  ")+" "+J[1]}else{G=J[0]+E+" "+G.join(", ")+" "+J[1]}return G}catch(K){return"[No string representation]"}}return z(A,(typeof B==="undefined"?2:B))};var b=function(v,w){if("logging" in n.config){var u=n.config.logging.marker||"FORGE"}else{var u="FORGE"}v="["+u+"] "+(v.indexOf("\n")===-1?"":"\n")+v;o.priv.call("logging.log",{message:v,level:w});if(typeof console!=="undefined"){switch(w){case 10:if(console.debug!==undefined&&!(console.debug.toString&&console.debug.toString().match("alert"))){console.debug(v)}break;case 30:if(console.warn!==undefined&&!(console.warn.toString&&console.warn.toString().match("alert"))){console.warn(v)}break;case 40:case 50:if(console.error!==undefined&&!(console.error.toString&&console.error.toString().match("alert"))){console.error(v)}break;default:case 20:if(console.info!==undefined&&!(console.info.toString&&console.info.toString().match("alert"))){console.info(v)}break}}};var m=function(u,v){if(u in n.logging.LEVELS){return n.logging.LEVELS[u]}else{n.logging.__logMessage("Unknown configured logging level: "+u);return v}};var r=function(v){var y=function(z){if(z.message){return z.message}else{if(z.description){return z.description}else{return""+z}}};if(v){var x="\nError: "+y(v);try{if(v.lineNumber){x+=" on line number "+v.lineNumber}if(v.fileName){var u=v.fileName;x+=" in file "+u.substr(u.lastIndexOf("/")+1)}}catch(w){}if(v.stack){x+="\r\nStack trace:\r\n"+v.stack}return x}return""};n.logging={LEVELS:{ALL:0,DEBUG:10,INFO:20,WARNING:30,ERROR:40,CRITICAL:50},debug:function(v,u){n.logging.log(v,u,n.logging.LEVELS.DEBUG)},info:function(v,u){n.logging.log(v,u,n.logging.LEVELS.INFO)},warning:function(v,u){n.logging.log(v,u,n.logging.LEVELS.WARNING)},error:function(v,u){n.logging.log(v,u,n.logging.LEVELS.ERROR)},critical:function(v,u){n.logging.log(v,u,n.logging.LEVELS.CRITICAL)},log:function(v,u,y){if(typeof(y)==="undefined"){var y=n.logging.LEVELS.INFO}try{var w=m(n.config.logging.level,n.logging.LEVELS.ALL)}catch(x){var w=n.logging.LEVELS.ALL}if(y>=w){b(j(v,false,10)+r(u),y)}}};n.media={videoPlay:function(v,w,u){if(!v.uri){v={uri:v}}o.priv.call("media.videoPlay",v,w,u)}};n.message={listen:function(v,w,u){o.disabledModule(u,"message")},broadcast:function(v,w,x,u){o.disabledModule(u,"message")},broadcastBackground:function(v,w,x,u){o.disabledModule(u,"message")},toFocussed:function(v,w,x,u){o.disabledModule(u,"message")}};n.notification={create:function(x,w,v,u){o.disabledModule(u,"notification")},setBadgeNumber:function(v,w,u){o.disabledModule(u,"notification")}};n.payments={purchaseProduct:function(v,w,u){o.disabledModule(u,"payments")},restoreTransactions:function(v,u){o.disabledModule(u,"payments")},transactionReceived:{addListener:function(v,u){o.disabledModule(u,"payments")}}};n.prefs={get:function(v,w,u){o.priv.call("prefs.get",{key:v.toString()},w&&function(x){if(x==="undefined"){x=undefined}else{try{x=JSON.parse(x)}catch(y){u({message:y.toString()});return}}w(x)},u)},set:function(v,w,x,u){if(w===undefined){w="undefined"}else{w=JSON.stringify(w)}o.priv.call("prefs.set",{key:v.toString(),value:w},x,u)},keys:function(v,u){o.priv.call("prefs.keys",{},v,u)},all:function(v,u){var v=v&&function(w){for(key in w){if(w[key]==="undefined"){w[key]=undefined}else{w[key]=JSON.parse(w[key])}}v(w)};o.priv.call("prefs.all",{},v,u)},clear:function(v,w,u){o.priv.call("prefs.clear",{key:v.toString()},w,u)},clearAll:function(v,u){o.priv.call("prefs.clearAll",{},v,u)}};n.reload={updateAvailable:function(v,u){o.priv.call("reload.updateAvailable",{},v,u)},update:function(v,u){o.priv.call("reload.update",{},v,u)},applyNow:function(v,u){n.logging.error("reload.applyNow has been disabled, please see docs.trigger.io for more information.");u({message:"reload.applyNow has been disabled, please see docs.trigger.io for more information.",type:"UNAVAILABLE"})},switchStream:function(v,w,u){o.priv.call("reload.switchStream",{streamid:v},w,u)},updateReady:{addListener:function(v,u){o.addEventListener("reload.updateReady",v)}}};n.request={get:function(v,w,u){n.request.ajax({url:v,dataType:"text",success:w&&function(){try{arguments[0]=JSON.parse(arguments[0])}catch(x){}w.apply(this,arguments)},error:u})}};n.request["ajax"]=function(w){var A=(w.files?w.files:null);var J=(w.fileUploadMethod?w.fileUploadMethod:"multipart");var z=(w.url?w.url:null);var B=(w.success?w.success:undefined);var I=(w.error?w.error:undefined);var y=(w.username?w.username:null);var u=(w.password?w.password:null);var N=(w.accepts?w.accepts:["*/*"]);var F=(w.cache?w.cache:false);var L=(w.contentType?w.contentType:null);var O=(w.data?w.data:null);var H=(w.dataType?w.dataType:null);var v=(w.headers?w.headers:{});var C=(w.timeout?w.timeout:60000);var x=(w.type?w.type:"GET");if(typeof N==="string"){N=[N]}var K=null;if(A){x="POST";if(J=="multipart"){K=n.tools.UUID().replace(/-/g,"");O=o.generateMultipartString(O,K);L="multipart/form-data; boundary="+K}else{if(J=="raw"){if(A.length>1){n.logging.warning("Only one file can be uploaded at once with type 'raw'");A=[A[0]]}O=null;L="image/jpg"}}}else{if(x=="GET"){z=o.generateURI(z,O);O=null}else{if(O){O=o.generateQueryString(O);if(!L){L="application/x-www-form-urlencoded"}}}}if(F){F={};F["wm"+Math.random()]=Math.random();z=o.generateURI(z,F)}if(N){v.Accept=N.join(",")}if(L){v["Content-Type"]=L}var G={};if(window._forgeDebug){try{G.id=n.tools.UUID();G.fromUrl=window.location.href;G.reqTime=(new Date()).getTime()/1000;G.method=x;G.data=O;G.url=z;_forgeDebug.wi.NetworkNotify.identifierForInitialRequest(G.id,G.url,{url:G.fromUrl,frameId:0,loaderId:0},[]);_forgeDebug.wi.NetworkNotify.willSendRequest(G.id,G.reqTime,{url:G.url,httpMethod:G.method,httpHeaderFields:{},requestFormData:G.data},{isNull:true})}catch(M){}}var E=false;var D=setTimeout(function(){if(E){return}E=true;if(window._forgeDebug){try{G.respTime=(new Date()).getTime()/1000;G.respText=O;_forgeDebug.wi.NetworkNotify.didReceiveResponse(G.id,G.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(G.id,G.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(G.id,G.respTime)}catch(P){}}I&&I({message:"Request timed out",type:"EXPECTED_FAILURE"})},C);o.priv.call("request.ajax",{url:z,username:y,password:u,data:O,headers:v,timeout:C,type:x,boundary:K,files:A,fileUploadMethod:J},function(R){clearTimeout(D);if(E){return}E=true;if(window._forgeDebug){try{G.respTime=(new Date()).getTime()/1000;G.respText=R;_forgeDebug.wi.NetworkNotify.didReceiveResponse(G.id,G.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Success",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(G.id,G.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(G.id,G.respTime)}catch(S){}}try{if(H=="xml"){var Q,P;if(window.DOMParser){Q=new DOMParser();P=Q.parseFromString(R,"text/xml")}else{P=new ActiveXObject("Microsoft.XMLDOM");P.async="false";P.loadXML(R)}R=P}else{if(H=="json"){R=JSON.parse(R)}}}catch(S){}B&&B(R)},function(){clearTimeout(D);if(E){return}E=true;if(window._forgeDebug){try{G.respTime=(new Date()).getTime()/1000;G.respText=O;_forgeDebug.wi.NetworkNotify.didReceiveResponse(G.id,G.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(G.id,G.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(G.id,G.respTime)}catch(P){}}I&&I.apply(this,arguments)})};n.sms={send:function(w,v,u){o.disabledModule(u,"sms")}};n.tabbar={show:function(v,u){o.disabledModule(u,"tabbar")},hide:function(v,u){o.disabledModule(u,"tabbar")},addButton:function(w,v,u){o.disabledModule(u,"tabbar")},removeButtons:function(v,u){o.disabledModule(u,"tabbar")},setTint:function(u,w,v){o.disabledModule(v,"tabbar")},setActiveTint:function(u,w,v){o.disabledModule(v,"tabbar")},setInactive:function(v,u){o.disabledModule(u,"tabbar")}};var l=function(y){if(y=="<all_urls>"){y="*://*"}y=y.split("://");var u=y[0];var w,x;if(y[1].indexOf("/")===-1){w=y[1];x=""}else{w=y[1].substring(0,y[1].indexOf("/"));x=y[1].substring(y[1].indexOf("/"))}var v="";if(u=="*"){v+=".*://"}else{v+=u+"://"}if(w=="*"){v+=".*"}else{if(w.indexOf("*.")===0){v+="(.+.)?"+w.substring(2)}else{v+=w}}v+=x.replace(/\*/g,".*");return"^"+v+"$"};n.tabs={open:function(v,w,x,u){if(typeof w==="function"){u=x;x=w;w=false}o.priv.call("tabs.open",{url:v,keepFocus:w},x,u)},openWithOptions:function(v,x,u){var w=undefined;if(v.pattern){v.pattern=l(v.pattern)}o.priv.call("tabs.open",v,x,u)},closeCurrent:function(u){u=arguments[1]||u;var v=n.tools.UUID();location.hash=v;o.priv.call("tabs.closeCurrent",{hash:v},null,u)}};n.tools={UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var w=Math.random()*16|0;var u=x=="x"?w:(w&3|8);return u.toString(16)}).toUpperCase()},getURL:function(v,w,u){o.priv.call("tools.getURL",{name:v.toString()},w,u)}};n.topbar={show:function(v,u){o.disabledModule(u,"topbar")},hide:function(v,u){o.disabledModule(u,"topbar")},setTitle:function(w,v,u){o.disabledModule(u,"topbar")},setTitleImage:function(v,w,u){o.disabledModule(u,"topbar")},setTint:function(u,w,v){o.disabledModule(v,"topbar")},addButton:function(v,w,u){o.disabledModule(u,"topbar")},removeButtons:function(v,u){o.disabledModule(u,"topbar")},homePressed:{addListener:function(v,u){o.disabledModule(u,"topbar")}}};n.urlhandler={urlLoaded:{addListener:function(v,u){o.disabledModule(u,"urlhandler")}}};var p=[];var g=false;o.priv.get=function(){var u=JSON.stringify(p);p=[];return u};var f=[],k="zero-timeout-message";function d(u){f.push(u);window.postMessage(k,"*")}function c(u){setTimeout(u,0)}function e(u){if(u.source==window&&u.data==k){if(u.stopPropagation){u.stopPropagation()}if(f.length){f.shift()()}}}if(window.postMessage){if(window.addEventListener){window.addEventListener("message",e,true)}else{if(window.attachEvent){window.attachEvent("onmessage",e)}}window.setZeroTimeout=d}else{window.setZeroTimeout=c}o.priv.send=function(u){p.push(u);if(g&&!window.forge._flushing){window.forge._flushing=true;c(function(){window.location.href="forge://go"})}};document.addEventListener("DOMContentLoaded",function(){g=true;window.forge._flushing=true;c(function(){window.location.href="forge://go"})},false);window.addEventListener("load",function(){o.priv.call("internal.hideLaunchImage",{},function(){},function(){})},false);n._get=o.priv.get;n._receive=function(){var u=arguments;if(typeof window.setZeroTimeout==="undefined"){setTimeout(function(){o.priv.receive.apply(this,u)},0)}else{c(function(){o.priv.receive.apply(this,u)})}};window.forge=n;window.forge["reload"]={updateAvailable:n.reload.updateAvailable,update:n.reload.update,applyNow:n.reload.applyNow,switchStream:n.reload.switchStream,updateReady:{addListener:n.reload.updateReady.addListener}};window.forge["ajax"]=n.request.ajax;window.forge["getPage"]=n.request.get;window.forge["createNotification"]=n.notification.create;window.forge["UUID"]=n.tools.UUID;window.forge["getURL"]=n.tools.getURL;window.forge["log"]=n.logging.log;window.forge["button"]["setUrl"]=n.button.setURL;window.forge["button"]["setBadgeText"]=n.button.setBadge;window.forge["file"]["delete"]=n.file.remove;window.forge["file"]["imageURL"]=n.file.URL})();